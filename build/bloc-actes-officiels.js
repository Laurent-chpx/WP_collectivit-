(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,a=window.wp.blocks,l=window.wp.blockEditor,n=window.wp.components,c=window.wp.element,r=window.wp.apiFetch;var o=e.n(r);(0,a.registerBlockType)("wpcollectivites/actes-officiels",{title:"Actes officiels",icon:"pdf",category:"wp-collectivites",keywords:["actes","officiels","documents","arrêtés"],attributes:{type_actes:{type:"number",default:0}},edit:({attributes:e,setAttributes:a})=>{const{type_actes:r}=e,[s,i]=(0,c.useState)([]),[p,d]=(0,c.useState)(!0),[f,u]=(0,c.useState)("");(0,c.useEffect)(()=>{o()({path:"/wp/v2/type-acte?per_page=100"}).then(e=>{const t=[{label:"-- Sélectionner un type d'acte --",value:0}];e.forEach(e=>{t.push({label:e.name,value:e.id}),e.id===r&&u(e.name)}),i(t),d(!1)}).catch(e=>{console.error("Erreur lors du chargement des types d'actes:",e),d(!1)})},[]);const m=(0,l.useBlockProps)({className:"bloc-actes-officiels"});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:"Configuration des actes officiels",initialOpen:!0},p?(0,t.createElement)(n.Spinner,null):(0,t.createElement)(n.SelectControl,{label:"Type d'actes à afficher",help:"Sélectionnez la catégorie d'actes officiels à afficher",value:r,options:s,onChange:e=>{const t=parseInt(e);a({type_actes:t});const l=s.find(e=>e.value===t);l&&u(l.label)}}))),(0,t.createElement)("div",{...m},0===r?(0,t.createElement)("div",{style:{padding:"20px",backgroundColor:"#f0f0f0",border:"2px dashed #ccc",textAlign:"center",color:"#666"}},(0,t.createElement)("p",{style:{margin:0}},(0,t.createElement)("strong",null,"Bloc Actes Officiels")),(0,t.createElement)("p",{style:{margin:"10px 0 0 0"}},"Veuillez sélectionner un type d'acte dans les paramètres du bloc")):(0,t.createElement)("div",{style:{padding:"20px",backgroundColor:"#f9f9f9",border:"1px solid #ddd"}},(0,t.createElement)("h3",{style:{marginTop:0}},f||`Type d'acte ID: ${r}`),(0,t.createElement)("p",{style:{color:"#666",fontStyle:"italic",marginBottom:0}},'Les actes de type "',f,'" seront affichés ici, organisés par année.'),(0,t.createElement)("p",{style:{fontSize:"12px",color:"#999",marginTop:"10px"}},"Note : Le contenu réel sera généré côté serveur lors de l'affichage de la page."))))},save:()=>null})})();